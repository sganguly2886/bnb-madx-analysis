# Twiss Output Files (MAD-X)

This folder contains the Twiss table outputs (`.tfs` and `.out`) produced by MAD-X for all quadrupole scans in the BNB narrow beam optics study.

These files provide:
- βx(s), βy(s) along the entire lattice
- Dx(s), Dy(s) dispersion functions
- Phase advance
- Beam envelope information
- Optical response to quadrupole current variations

They serve as the **primary input** for all Python-based analysis of:
- Emittance extraction
- Dispersion fitting
- Predicted beam sizes at the wire chambers
- Predicted beam spot at the BNB target

---

## Folder Organization

### **Q873 Scan Outputs**
Files named:
twiss_Q873_.tfs
twiss_HQ873K1_.out

These files reflect variations of the Q873 quadrupole strength and include:
- K1 sweeps (±6A, ±12A, ±18A, …)
- Percentage strength shifts (e.g., 10% up/down)
- Baseline optical configurations

---

### **Q874 Scan Outputs**
Files named:
twiss_Q874_.tfs
twiss_HQ874K1_.out
twiss_Q874_baseline_*.tfs

These allow analysis of:
- Local minima (e.g., −27 A region)
- Dispersion sensitivity
- Coupled optics effects between Q873 and Q874

---

### **Q875 Scan Outputs**
Files named:
twiss_Q875_.tfs
twiss_HQ875K1_.out

Used primarily for studying:
- Vertical focusing variations
- Spot size stability at the target

---

## How These Files Are Used in Analysis

The Python analysis scripts in `2_python/` read these `.tfs` and `.out` files to compute:

1. **β and D values** at MW873, MW875, MW876  
2. **Predicted beam sizes** using the beam model  
   \[
   \sigma^2 = \varepsilon \beta + (\sigma_\delta D)^2
   \]
3. **Target spot size predictions** via propagated β and D at ~207 m  
4. **Emittance and momentum spread extraction**

---

## Notes

- These files are automatically generated by MAD-X runs (`run_HQ873.py`, `run_HQ874.py`, `run_HQ875.py`).
- Changing the lattice inputs in `0_madx_lattices/` will regenerate updated Twiss files.
- Every scientific plot in this repository ultimately derives from these Twiss outputs.

